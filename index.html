<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>
<script>
  window.onload = function() {
    var ROLL = 0,
        PITCH = 1,
        YAW = 2;
    var BUFFER_SIZE = 100;
    var ROLLBUFFER = [];
    var PITCHBUFFER = [];
    var YAWBUFFER = [];
    var socket = io('http://192.168.0.20/');
    var ctx = document.getElementById("myChart");
    
    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: ["ROLL", "PITCH", "YAW"],
          datasets: [
            {
              label: 'ROLL',
              data: ROLLBUFFER,
              borderWidth: 1
            },
            {
              label: 'PITCH',
              data: PITCHBUFFER,
              borderWidth: 1
            },
             {
              label: 'YAW',
              data: YAWBUFFER,
              borderWidth: 1
            }
          ]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          }
      }
});
    socket.on('MPU6050', function (dataFromServer) {
      ROLLBUFFER.push(dataFromServer[ROLL].angle);
      PITCHBUFFER.push(dataFromServer[PITCH].angle);
      YAWBUFFER.push(dataFromServer[YAW].angle);
      console.log(dataFromServer[ROLL].angle)
      // myChart.update();
    });
  }
</script>
<head>
<body>
  <canvas id="myChart" width="400" height="400"></canvas>
</body>
<html>
